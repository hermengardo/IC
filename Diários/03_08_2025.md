# Diário (04/08/2025)

## Hoje

- **1. Conectando no Jupyter Notebook remotamente**
  - pixi run jupyter-lab --no-browser (em um terminal)
  - ssh -L PORT:localhost:PORT user@host (em outro)

- **2. Erro na instalação do evo2**
```shell
  File "/home/jaoliveira/embeddings/.pixi/envs/default/lib/python3.12/site-packages/transformer_engine/common/__init__.py", line 168, in load_framework_extension
    solib = importlib.util.module_from_spec(spec)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  ImportError: /home/jaoliveira/embeddings/.pixi/envs/default/lib/python3.12/site-packages/transformer_engine/wheel_lib/transformer_engine_torch.cpython-312-x86_64-linux-gnu.so: undefined symbol: _ZN3c105ErrorC2ENS_14SourceLocationESs
```
  - do Troubleshooting do [pacote](https://github.com/NVIDIA/TransformerEngine)
    - **ABI Compatibility Issues:**
      - Symptoms: ImportError with undefined symbols when importing transformer_engine
      
      - Solution: Ensure PyTorch and Transformer Engine are built with the same C++ ABI setting. Rebuild PyTorch from source with matching ABI.
      
      - Context: If you’re using PyTorch built with a different C++ ABI than your system’s default, you may encounter these undefined symbol errors. This is particularly common with pip-installed PyTorch outside of containers.

  - Solução (após desinstalar pacotes, limpar o cache do ambiente ou recriar o ambiente):
    ```shell
    pixi clean
    pixi clean cache  # Atenção: apaga pacotes instalados pelo pip
    pixi install
    pixi run pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121
    export _GLIBCXX_USE_CXX11_ABI=0
    pixi run pip install --no-build-isolation transformer_engine[pytorch]
    pixi run pip install flash-attn==2.8.0.post2 --no-build-isolation
    pixi run pip install evo2
    ```

## Amanhã:
- [x] Identificar e resolver os erros.
- [x] Detalhar erro e solução no diário.
- [x] Terminar de configurar o ambiente.
- [x] Resolver o erro do evo2
- [ ] Escrever o script para a vetorização dos nucleotídeos.
- [ ] Continuar a processar os dados.
